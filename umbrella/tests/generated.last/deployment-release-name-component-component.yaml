---
# Source: umbrella-chart/charts/component/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: release-name-component-component
  labels:
    app.kubernetes.io/name: component
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/version: 1.16.0
    app.kubernetes.io/managed-by: Helm
    helm.sh/chart: component-0.1.0
    chart-name: component
  annotations:
    checksum/config: 671e09fda7d932e990ce9148265546a927f4689522a9ce9ff8239d99e34fb7cd
    checksum/secrets: 2a98d056c258e8303a2ced0ea938203bf790a5aaa3068a53fb8005ccfa395258
spec:
  selector:
    matchLabels:
      app: release-name-component-component
  template:
    metadata:
      labels:
        app.kubernetes.io/name: component
        app.kubernetes.io/instance: release-name
        app.kubernetes.io/version: 1.16.0
        app.kubernetes.io/managed-by: Helm
        helm.sh/chart: component-0.1.0
        chart-name: component
      annotations:
        checksum/config: 671e09fda7d932e990ce9148265546a927f4689522a9ce9ff8239d99e34fb7cd
        checksum/secrets: 2a98d056c258e8303a2ced0ea938203bf790a5aaa3068a53fb8005ccfa395258
    spec:
      containers:
        - name: component
          image: yourrepo.com/custom-service:v1.2.3
          ports:
            - containerPort: 8080
          livenessProbe:
            httpGet:
              path: /healthz
              port: 8080
            initialDelaySeconds: 10
            periodSeconds: 10
            timeoutSeconds: 1
            failureThreshold: 3
          readinessProbe:
            httpGet:
              path: /ready
              port: 8080
            initialDelaySeconds: 5
            periodSeconds: 10
            timeoutSeconds: 1
            successThreshold: 1
            failureThreshold: 3
          startupProbe:
            httpGet:
              path: /startup
              port: 8080
            initialDelaySeconds: 15
            periodSeconds: 10
            timeoutSeconds: 2
            failureThreshold: 5
          volumeMounts:
            - name: app-config
              mountPath: /etc/app/config
              readOnly: true
            - name: app-secrets
              mountPath: /etc/app/creds
              readOnly: true
      volumes:
        - name: app-config
          configMap:
            name: app-configmap
        - name: app-secrets
          secret:
            secretName: app-secret
